/* ============================================
   EQUILIBRIUM — Living Clock
   "Your breath is the clock."
   ============================================ */

/* --- RESET --- */
*,
*::before,
*::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* --- TOKENS --- */
:root {
  /* Backgrounds */
  --bg-void: #0a0a0f;
  --bg-surface: #12121a;

  /* Gold spectrum */
  --gold: #c9a84c;
  --gold-dim: #8a7335;
  --gold-bright: #e0c060;

  /* Text */
  --cream: #e8dcc8;
  --cream-muted: #9a9080;

  /* Ring colors (inner → outer = bright → dim) */
  --ring-breath: #c9a84c;
  --ring-pulse: #d4a853;
  --ring-sprint: #a8853f;
  --ring-day: #7a6830;
  --ring-week: #1a2a1a;
  --ring-month: #2a1a2a;

  /* Phase accents */
  --phase-entry: #6b8cae;
  --phase-focus: #c9a84c;
  --phase-exit: #8b6b8a;

  /* Glow */
  --glow: rgba(201, 168, 76, 0.15);
  --glow-strong: rgba(201, 168, 76, 0.3);

  /* Harmonic (set dynamically by JS) */
  --harmonic-color: #c9a84c;
  --harmonic-glow: 0.5;

  /* Typography */
  --font-display: 'Cormorant Garamond', serif;
  --font-voice: 'Libre Baskerville', serif;
  --font-ui: 'DM Sans', sans-serif;

  --text-xs: 0.75rem;
  --text-sm: 0.875rem;
  --text-base: 1rem;
  --text-lg: 1.125rem;
  --text-xl: 1.5rem;
  --text-2xl: 2rem;

  /* Spacing */
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;

  /* Animation */
  --breath-duration: 11s;
}

/* --- BASE --- */
html,
body {
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: var(--bg-void);
  color: var(--cream);
  font-family: var(--font-ui);
}

#app {
  width: 100%;
  height: 100dvh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: relative;
}

/* --- CLOCK CONTAINER --- */
#clock-container {
  position: relative;
  width: 80vmin;
  height: 80vmin;
  display: flex;
  align-items: center;
  justify-content: center;
}

#rings {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
}

/* Ring label text */
.ring-label {
  pointer-events: none;
  transition: opacity 0.5s ease;
}

/* Ring tracks and fills — animate stroke-width for sprint dominance */
.ring-track,
.ring-fill {
  transition: stroke-width 0.8s ease, opacity 0.8s ease;
}

/* --- BREATHING CIRCLE (HARMONIC CENTER) --- */
#breathing-circle {
  position: relative;
  width: clamp(100px, 22vmin, 180px);
  height: clamp(100px, 22vmin, 180px);
  border-radius: 50%;
  border: 2px solid var(--harmonic-color);
  display: flex;
  align-items: center;
  justify-content: center;
  animation: breathe var(--breath-duration) ease-in-out infinite;
  z-index: 2;
  transition: border-color 2s ease;
}

#breath-inner {
  width: 70%;
  height: 70%;
  border-radius: 50%;
  background: radial-gradient(circle at center,
      color-mix(in srgb, var(--harmonic-color) calc(var(--harmonic-glow) * 20%), transparent) 0%,
      transparent 70%);
  box-shadow:
    0 0 60px color-mix(in srgb, var(--harmonic-color) calc(var(--harmonic-glow) * 30%), transparent),
    0 0 120px color-mix(in srgb, var(--harmonic-color) 5%, transparent);
  transition: box-shadow 2s ease, background 2s ease;
}

@keyframes breathe {

  0%,
  100% {
    transform: scale(0.82);
    opacity: 0.5;
    box-shadow:
      0 0 30px color-mix(in srgb, var(--harmonic-color) 10%, transparent),
      inset 0 0 15px color-mix(in srgb, var(--harmonic-color) 5%, transparent);
    border-color: color-mix(in srgb, var(--harmonic-color) 60%, #0a0a0f);
  }

  50% {
    transform: scale(1.0);
    opacity: 1.0;
    box-shadow:
      0 0 60px color-mix(in srgb, var(--harmonic-color) 30%, transparent),
      inset 0 0 30px color-mix(in srgb, var(--harmonic-color) 15%, transparent);
    border-color: var(--harmonic-color);
  }
}

/* --- SPRINT CTA --- */
#sprint-cta {
  position: absolute;
  z-index: 5;
  padding: var(--space-md) var(--space-xl);
  background: transparent;
  border: 1px solid var(--gold);
  border-radius: 999px;
  color: var(--gold);
  font-family: var(--font-display);
  font-size: var(--text-base);
  font-weight: 400;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  cursor: pointer;
  transition: all 0.5s ease;
  box-shadow: 0 0 20px rgba(201, 168, 76, 0.1);
}

#sprint-cta:hover {
  background: rgba(201, 168, 76, 0.08);
  box-shadow: 0 0 40px rgba(201, 168, 76, 0.2);
  border-color: var(--gold-bright);
  color: var(--gold-bright);
}

#sprint-cta.hidden {
  opacity: 0;
  pointer-events: none;
  transform: scale(0.9);
}

/* --- HOLD TO EXIT FEEDBACK --- */
#hold-feedback {
  position: absolute;
  bottom: -2rem;
  left: 50%;
  transform: translateX(-50%);
  font-family: var(--font-ui);
  font-size: var(--text-xs);
  color: var(--cream-muted);
  letter-spacing: 0.05em;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
  white-space: nowrap;
}

#hold-feedback.visible {
  opacity: 0.7;
}

/* --- INFO AREA (3 lines max below clock) --- */
#info-area {
  text-align: center;
  z-index: 3;
  min-height: 6rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--space-xs);
  padding: var(--space-sm) var(--space-md);
  max-width: 500px;
  margin-bottom: var(--space-2xl);
}

#phase-display {
  text-align: center;
}

#phase-label {
  font-family: var(--font-display);
  font-weight: 300;
  font-size: var(--text-xl);
  color: var(--gold);
  letter-spacing: 0.15em;
  text-transform: uppercase;
  margin-bottom: var(--space-xs);
}

#time-remaining {
  font-family: var(--font-ui);
  font-size: var(--text-sm);
  color: var(--cream-muted);
  letter-spacing: 0.05em;
}

#day-position {
  font-family: var(--font-ui);
  font-size: var(--text-xs);
  color: var(--cream-muted);
  letter-spacing: 0.06em;
  opacity: 0.7;
}

/* --- GUIDANCE LINE (ambient mode only) --- */
#guidance {
  font-family: var(--font-voice);
  font-style: italic;
  font-size: var(--text-base);
  color: var(--cream);
  letter-spacing: 0.02em;
  max-width: 400px;
  line-height: 1.5;
  opacity: 0.85;
  transition: opacity 1.5s ease;
}

/* --- TRANSITION PROMPT (sprint mode) --- */
#transition-prompt {
  font-family: var(--font-voice);
  font-style: italic;
  font-size: var(--text-lg);
  color: var(--cream);
  text-align: center;
  max-width: 300px;
  line-height: 1.6;
  opacity: 0;
  pointer-events: none;
  transition: opacity 2s ease-in;
}

#transition-prompt.visible {
  opacity: 1;
}

#transition-prompt.fading {
  opacity: 0;
  transition: opacity 1.5s ease-out;
}

/* --- STATUS BAR --- */
#status-bar {
  position: absolute;
  bottom: var(--space-lg);
  display: flex;
  align-items: center;
  gap: var(--space-lg);
  font-family: var(--font-ui);
  font-size: var(--text-xs);
  color: var(--cream-muted);
  letter-spacing: 0.05em;
}

#status-bar span {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  opacity: 0.7;
}

#status-bar .status-time {
  font-size: var(--text-sm);
  font-weight: 500;
  color: var(--cream);
  opacity: 1;
  letter-spacing: 0.08em;
}

/* Status bar separator */
#status-bar span:not(:last-child)::after {
  content: '·';
  margin-left: var(--space-sm);
  color: var(--gold-dim);
}

/* --- SETTINGS TOGGLE --- */
#settings-toggle {
  position: absolute;
  bottom: var(--space-lg);
  right: var(--space-lg);
  background: none;
  border: none;
  color: var(--cream-muted);
  font-size: 18px;
  cursor: pointer;
  padding: var(--space-sm);
  border-radius: 50%;
  transition: color 0.3s ease, background 0.3s ease;
  z-index: 5;
  line-height: 1;
}

#settings-toggle:hover {
  color: var(--gold-dim);
  background: rgba(201, 168, 76, 0.05);
}

/* --- SETTINGS OVERLAY --- */
#settings-overlay {
  position: fixed;
  inset: 0;
  background: rgba(10, 10, 15, 0.7);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  display: flex;
  align-items: flex-end;
  justify-content: center;
  z-index: 100;
  opacity: 1;
  transition: opacity 0.3s ease;
}

#settings-overlay.hidden {
  opacity: 0;
  pointer-events: none;
}

#settings-panel {
  background: var(--bg-surface);
  border-top: 1px solid rgba(201, 168, 76, 0.1);
  border-radius: 16px 16px 0 0;
  padding: var(--space-xl) var(--space-xl) var(--space-2xl);
  width: 100%;
  max-width: 420px;
  transform: translateY(0);
  transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

#settings-overlay.hidden #settings-panel {
  transform: translateY(100%);
}

#settings-panel h2 {
  font-family: var(--font-display);
  font-weight: 400;
  font-size: var(--text-xl);
  color: var(--gold);
  letter-spacing: 0.1em;
  text-transform: uppercase;
  margin-bottom: var(--space-xl);
}

.setting-group {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-md) 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.setting-group label {
  font-family: var(--font-ui);
  font-size: var(--text-sm);
  color: var(--cream);
}

.setting-value {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.setting-value span {
  font-family: var(--font-ui);
  font-size: var(--text-sm);
  color: var(--gold);
  min-width: 3ch;
  text-align: right;
}

/* Range slider */
input[type="range"] {
  -webkit-appearance: none;
  appearance: none;
  width: 120px;
  height: 4px;
  background: var(--gold-dim);
  border-radius: 2px;
  outline: none;
}

input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: var(--gold);
  cursor: pointer;
  border: none;
}

/* Checkbox toggle */
input[type="checkbox"] {
  -webkit-appearance: none;
  appearance: none;
  width: 40px;
  height: 22px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 11px;
  position: relative;
  cursor: pointer;
  transition: background 0.3s ease;
}

input[type="checkbox"]::before {
  content: '';
  position: absolute;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--cream-muted);
  top: 2px;
  left: 2px;
  transition: transform 0.3s ease, background 0.3s ease;
}

input[type="checkbox"]:checked {
  background: rgba(201, 168, 76, 0.3);
}

input[type="checkbox"]:checked::before {
  transform: translateX(18px);
  background: var(--gold);
}

#settings-close {
  display: block;
  width: 100%;
  margin-top: var(--space-xl);
  padding: var(--space-md);
  background: rgba(201, 168, 76, 0.08);
  border: 1px solid rgba(201, 168, 76, 0.15);
  border-radius: 8px;
  color: var(--gold);
  font-family: var(--font-display);
  font-size: var(--text-base);
  letter-spacing: 0.1em;
  text-transform: uppercase;
  cursor: pointer;
  transition: background 0.3s ease;
}

#settings-close:hover {
  background: rgba(201, 168, 76, 0.15);
}

/* --- BIRTHDAY PROMPT --- */
#birthday-prompt {
  position: fixed;
  inset: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(10, 10, 15, 0.92);
  backdrop-filter: blur(20px);
  transition: opacity 0.5s ease;
}

#birthday-prompt.hidden {
  opacity: 0;
  pointer-events: none;
}

#birthday-prompt-panel {
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-md);
}

#birthday-prompt-panel p {
  font-family: var(--font-display);
  font-size: var(--text-xl);
  color: var(--cream);
  letter-spacing: 0.08em;
}

#birthday-prompt-panel small {
  font-family: var(--font-ui);
  font-size: var(--text-xs);
  color: var(--cream-muted);
  letter-spacing: 0.05em;
}

#birthday-confirm {
  margin-top: var(--space-sm);
  padding: var(--space-md) var(--space-xl);
  background: rgba(201, 168, 76, 0.08);
  border: 1px solid var(--gold);
  border-radius: 999px;
  color: var(--gold);
  font-family: var(--font-display);
  font-size: var(--text-base);
  letter-spacing: 0.12em;
  text-transform: uppercase;
  cursor: pointer;
  transition: background 0.3s ease;
}

#birthday-confirm:hover {
  background: rgba(201, 168, 76, 0.15);
}

/* Time & date input styling */
input[type="time"],
input[type="date"] {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(201, 168, 76, 0.2);
  border-radius: 6px;
  color: var(--gold);
  font-family: var(--font-ui);
  font-size: var(--text-sm);
  padding: var(--space-xs) var(--space-sm);
  outline: none;
  cursor: pointer;
}

input[type="time"]::-webkit-calendar-picker-indicator,
input[type="date"]::-webkit-calendar-picker-indicator {
  filter: invert(0.7) sepia(1) hue-rotate(10deg);
  cursor: pointer;
}

input[type="time"]:focus,
input[type="date"]:focus {
  border-color: var(--gold);
}

/* --- RESPONSIVE --- */

/* Phone portrait */
@media (max-width: 639px) {
  #clock-container {
    width: 85vw;
    height: 85vw;
  }

  #phase-label {
    font-size: var(--text-lg);
  }

  #guidance {
    font-size: var(--text-sm);
    max-width: 300px;
  }

  #status-bar {
    flex-wrap: wrap;
    justify-content: center;
    gap: var(--space-sm);
    max-width: 90vw;
    font-size: 0.65rem;
  }

  #sprint-cta {
    font-size: var(--text-sm);
    padding: var(--space-sm) var(--space-lg);
  }

}

/* Phone landscape */
@media (min-width: 640px) and (max-width: 767px) {
  #clock-container {
    width: 60vmin;
    height: 60vmin;
  }
}

/* iPad portrait */
@media (min-width: 768px) and (max-width: 1023px) {
  #clock-container {
    width: 75vmin;
    height: 75vmin;
  }
}

/* iPad landscape + Desktop */
@media (min-width: 1024px) {
  #clock-container {
    width: 80vmin;
    height: 80vmin;
  }
}