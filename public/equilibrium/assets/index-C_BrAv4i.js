(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();const y=4,P=16,L=4,v=y+P+L,F=4,b=v*F,te=[{name:"Sunday",planet:"Sun",symbol:"â˜‰",emoji:"â˜€ï¸",energy:"Illumination & Celebration",intelligence:"Spiritual (SQ)",description:"Vision, purpose, creative self-expression. Celebrate what you've built."},{name:"Monday",planet:"Moon",symbol:"â˜½",emoji:"ğŸŒ™",energy:"Intuition & Emotional Depth",intelligence:"Emotional (EQ)",description:"Reflection, inner sensing, emotional recalibration. Plan from feeling, not force."},{name:"Tuesday",planet:"Mars",symbol:"â™‚",emoji:"ğŸ”¥",energy:"Action & Courage",intelligence:"Kinesthetic (Body)",description:"Decisive action, physical energy, tackling hard things. Move your body."},{name:"Wednesday",planet:"Mercury",symbol:"â˜¿",emoji:"ğŸ—£ï¸",energy:"Clarity & Communication",intelligence:"Verbal-Linguistic",description:"Meetings, writing, learning, networking. Mental agility at peak."},{name:"Thursday",planet:"Jupiter",symbol:"â™ƒ",emoji:"âœ¨",energy:"Expansion & Wisdom",intelligence:"Vision-Logic",description:"Big-picture thinking, teaching, strategic planning. Expand horizons."},{name:"Friday",planet:"Venus",symbol:"â™€",emoji:"ğŸŒ¹",energy:"Beauty & Harmony",intelligence:"Aesthetic & Interpersonal",description:"Creativity, relationships, design, pleasure. Make things beautiful."},{name:"Saturday",planet:"Saturn",symbol:"â™„",emoji:"ğŸª",energy:"Structure & Grounding",intelligence:"Moral & Logical",description:"Discipline, organizing, completing. Review the week, ground the gains."}],ne=["Saturn","Jupiter","Mars","Sun","Venus","Mercury","Moon"],se=[3,6,2,5,1,4,0],re={Sun:{emoji:"â˜€ï¸",energy:"Vitality & Purpose"},Moon:{emoji:"ğŸŒ™",energy:"Intuition & Feeling"},Mars:{emoji:"ğŸ”¥",energy:"Drive & Action"},Mercury:{emoji:"ğŸ—£ï¸",energy:"Thought & Communication"},Jupiter:{emoji:"âœ¨",energy:"Expansion & Vision"},Venus:{emoji:"ğŸŒ¹",energy:"Beauty & Connection"},Saturn:{emoji:"ğŸª",energy:"Structure & Discipline"}},_=[{name:"New Moon",symbol:"ğŸŒ‘",start:0,end:1.85,energy:"Set intentions Â· Plant seeds"},{name:"Waxing Crescent",symbol:"ğŸŒ’",start:1.85,end:5.53,energy:"Emerge Â· Take first steps"},{name:"First Quarter",symbol:"ğŸŒ“",start:5.53,end:9.22,energy:"Build Â· Overcome resistance"},{name:"Waxing Gibbous",symbol:"ğŸŒ”",start:9.22,end:12.91,energy:"Refine Â· Trust the process"},{name:"Full Moon",symbol:"ğŸŒ•",start:12.91,end:16.61,energy:"Harvest Â· Celebrate completion"},{name:"Waning Gibbous",symbol:"ğŸŒ–",start:16.61,end:20.3,energy:"Share Â· Teach what you learned"},{name:"Last Quarter",symbol:"ğŸŒ—",start:20.3,end:23.99,energy:"Release Â· Let go of what's done"},{name:"Waning Crescent",symbol:"ğŸŒ˜",start:23.99,end:29.53,energy:"Rest Â· Surrender Â· Renew"}],ie={Winter:"Seed & Incubate",Spring:"Sprout & Build",Summer:"Bloom & Harvest",Autumn:"Gather & Release"};function oe(t,e=11){const s=t/1e3%e/e;return{position:s,inhaling:s<.5}}function ae(t,e){if(!t)return{elapsed:0,remaining:b,progress:0,pulse:{pulseNumber:1,phase:"entry",phaseElapsed:0,phaseRemaining:y,pulseElapsed:0,pulseProgress:0},active:!1};const i=(e-t)/6e4;if(i>=b)return{elapsed:b,remaining:0,progress:1,pulse:{pulseNumber:4,phase:"exit",phaseElapsed:L,phaseRemaining:0,pulseElapsed:v,pulseProgress:1},active:!1};const o=Math.min(Math.floor(i/v),F-1),n=i-o*v;let r,u,c;return n<y?(r="entry",u=n,c=y-n):n<y+P?(r="focus",u=n-y,c=P-u):(r="exit",u=n-y-P,c=L-u),{elapsed:i,remaining:b-i,progress:i/b,pulse:{pulseNumber:o+1,phase:r,phaseElapsed:u,phaseRemaining:c,pulseElapsed:n,pulseProgress:n/v},active:!0}}function ue(t){const e=new Date(t),s=e.getHours(),i=e.getMinutes(),o=s*60+i,n=o/1440;let r;s<6?r="dawn":s<12?r="morning":s<18?r="afternoon":r="evening";const u=Math.max(0,o-540),c=Math.floor(u/111)+1;return{hour:s,minute:i,progress:n,quarter:r,sprintSlot:c}}function le(t,e){const i=(se[t]+e)%7,o=ne[i],n=re[o];return{planet:o,emoji:n.emoji,energy:n.energy,hourIndex:e}}function ce(t){const e=new Date(t),s=e.getDay(),i=e.getHours(),o=(s*24+i)/168;return{dayOfWeek:s,progress:o,planetaryDay:te[s],planetaryHour:le(s,i)}}function pe(t){const e=new Date(t),s=e.getMonth()+1,i=e.getDate(),o=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),n=(i-1)/o;return{month:s,day:i,progress:n}}function ge(t){const e=new Date(t),s=e.getMonth(),i=Math.floor(s/3)+1,n=["Winter","Spring","Summer","Autumn"][i-1],r=(i-1)*3,u=new Date(e.getFullYear(),r,1).getTime(),c=new Date(e.getFullYear(),r+3,1).getTime(),g=(t-u)/(c-u);return{quarter:i,season:n,progress:g,energy:ie[n]}}function me(t){const e=new Date(2e3,0,6,18,14).getTime(),s=29.53058770576,n=(t-e)/864e5/s%1*s;let r=_[0];for(const u of _)if(n>=u.start&&n<u.end){r=u;break}return{phase:r.name,symbol:r.symbol,progress:n/s,day:n,energy:r.energy}}function de(t,e,s=11){return{breath:oe(t,s),sprint:ae(e,t),day:ue(t),week:ce(t),month:pe(t),quarter:ge(t),moon:me(t)}}function he(t){const e=Math.floor(t),s=Math.floor((t-e)*60);return`${e}:${s.toString().padStart(2,"0")}`}const ye=["INCEPTION","EMANATION","RETURN","INTEGRATION"];function fe(t){return ye[Math.min(t-1,3)]||"INCEPTION"}function j(t){switch(t){case"entry":return"var(--phase-entry)";case"focus":return"var(--phase-focus)";case"exit":return"var(--phase-exit)"}}function Se(t){switch(t){case"entry":return"Entry";case"focus":return"Focus";case"exit":return"Exit"}}const f="http://www.w3.org/2000/svg",p=200;function be(t,e,s,i,o){const n=document.createElementNS(f,"circle");return n.setAttribute("cx",String(p)),n.setAttribute("cy",String(p)),n.setAttribute("r",String(t)),n.setAttribute("fill","none"),n.setAttribute("stroke",e),n.setAttribute("stroke-width",String(s)),n.setAttribute("class",i),n.setAttribute("opacity",String(o)),n}function Ee(t,e,s,i,o){const n=2*Math.PI*t,r=document.createElementNS(f,"circle");return r.setAttribute("cx",String(p)),r.setAttribute("cy",String(p)),r.setAttribute("r",String(t)),r.setAttribute("fill","none"),r.setAttribute("stroke",e),r.setAttribute("stroke-width",String(s)),r.setAttribute("stroke-dasharray",String(n)),r.setAttribute("stroke-dashoffset",String(n*(1-i))),r.setAttribute("stroke-linecap","round"),r.setAttribute("transform",`rotate(-90 ${p} ${p})`),r.setAttribute("class",o),r}function E(t,e,s){const i=2*Math.PI*e;t.setAttribute("stroke-dashoffset",String(i*(1-s)))}function we(t,e){const s=(e*360-90)*(Math.PI/180),i=p+t*Math.cos(s),o=p+t*Math.sin(s),n=document.createElementNS(f,"circle");return n.setAttribute("cx",String(i)),n.setAttribute("cy",String(o)),n.setAttribute("r","3"),n.setAttribute("class","position-dot"),n}function w(t,e,s){const i=(s*360-90)*(Math.PI/180);t.setAttribute("cx",String(p+e*Math.cos(i))),t.setAttribute("cy",String(p+e*Math.sin(i)))}const h=[{id:"sprint",radius:88,color:"var(--ring-sprint)",trackWidth:2,progressWidth:2.5,isOuter:!1},{id:"day",radius:112,color:"var(--ring-day)",trackWidth:1.5,progressWidth:2,isOuter:!1},{id:"week",radius:136,color:"var(--ring-week)",trackWidth:1,progressWidth:1.5,isOuter:!0},{id:"month",radius:155,color:"var(--ring-month)",trackWidth:1,progressWidth:1.5,isOuter:!0},{id:"quarter",radius:172,color:"var(--ring-quarter)",trackWidth:.8,progressWidth:1,isOuter:!0}],H=72;class ve{svg;elements;phaseLabel;timeRemaining;transitionPrompt;planetaryDay;planetaryHour;moonPhase;quarterInfo;lastPromptPhase="";promptTimeout=null;constructor(){this.svg=document.getElementById("rings"),this.phaseLabel=document.getElementById("phase-label"),this.timeRemaining=document.getElementById("time-remaining"),this.transitionPrompt=document.getElementById("transition-prompt"),this.planetaryDay=document.getElementById("planetary-day"),this.planetaryHour=document.getElementById("planetary-hour"),this.moonPhase=document.getElementById("moon-phase"),this.quarterInfo=document.getElementById("quarter-info"),this.elements={pulseArcs:[],pulseGroup:document.createElementNS(f,"g"),ringProgress:new Map,ringDots:new Map,ringGroups:new Map},this.buildRings()}buildRings(){this.svg.innerHTML="",this.elements.pulseGroup=document.createElementNS(f,"g");const e=2*Math.PI*H,s=.03,i=(1-s*4)/4,o=e*i,n=e*s;for(let r=0;r<4;r++){const u=document.createElementNS(f,"circle");u.setAttribute("cx",String(p)),u.setAttribute("cy",String(p)),u.setAttribute("r",String(H)),u.setAttribute("fill","none"),u.setAttribute("stroke","var(--ring-pulse)"),u.setAttribute("stroke-width","3"),u.setAttribute("stroke-dasharray",`${o} ${e-o}`),u.setAttribute("stroke-dashoffset",String(-r*(o+n))),u.setAttribute("stroke-linecap","round"),u.setAttribute("transform",`rotate(-90 ${p} ${p})`),u.setAttribute("class","pulse-arc"),this.elements.pulseArcs.push(u),this.elements.pulseGroup.appendChild(u)}this.svg.appendChild(this.elements.pulseGroup);for(const r of h){const u=document.createElementNS(f,"g");u.setAttribute("class",`ring-group ${r.isOuter?"ring-outer":""}`);const c=be(r.radius,r.color,r.trackWidth,"ring-track",.15);u.appendChild(c);const g=Ee(r.radius,r.color,r.progressWidth,0,"ring-progress");u.appendChild(g),this.elements.ringProgress.set(r.id,g);const A=we(r.radius,0);u.appendChild(A),this.elements.ringDots.set(r.id,A),this.elements.ringGroups.set(r.id,u),this.svg.appendChild(u)}}update(e,s,i){e.sprint.active?this.elements.pulseArcs.forEach((l,S)=>{const k=S+1;k<e.sprint.pulse.pulseNumber?(l.classList.add("completed"),l.classList.remove("active")):k===e.sprint.pulse.pulseNumber?(l.classList.add("active"),l.classList.remove("completed"),l.setAttribute("stroke",j(e.sprint.pulse.phase))):(l.classList.remove("active","completed"),l.setAttribute("stroke","var(--ring-pulse)"))}):this.elements.pulseArcs.forEach(l=>{l.classList.remove("active","completed"),l.setAttribute("stroke","var(--ring-pulse)"),l.style.opacity="0.15"});const o=this.elements.ringProgress.get("sprint"),n=this.elements.ringDots.get("sprint"),r=h.find(l=>l.id==="sprint");E(o,r.radius,e.sprint.progress),w(n,r.radius,e.sprint.progress);const u=this.elements.ringProgress.get("day"),c=this.elements.ringDots.get("day"),g=h.find(l=>l.id==="day");E(u,g.radius,e.day.progress),w(c,g.radius,e.day.progress);const A=s,Q=this.elements.ringProgress.get("week"),J=this.elements.ringDots.get("week"),$=h.find(l=>l.id==="week");E(Q,$.radius,e.week.progress),w(J,$.radius,e.week.progress);const K=this.elements.ringProgress.get("month"),z=this.elements.ringDots.get("month"),B=h.find(l=>l.id==="month");E(K,B.radius,e.month.progress),w(z,B.radius,e.month.progress);const X=this.elements.ringProgress.get("quarter"),Z=this.elements.ringDots.get("quarter"),W=h.find(l=>l.id==="quarter");if(E(X,W.radius,e.quarter.progress),w(Z,W.radius,e.quarter.progress),this.elements.ringGroups.forEach((l,S)=>{h.find(ee=>ee.id===S).isOuter&&(l.style.opacity=A?"1":"0",l.style.transition="opacity 0.5s ease")}),e.sprint.active){const l=fe(e.sprint.pulse.pulseNumber),S=Se(e.sprint.pulse.phase);this.phaseLabel.textContent=`${l} Â· ${S}`,this.timeRemaining.textContent=he(e.sprint.pulse.phaseRemaining)+" remaining",this.phaseLabel.style.color=j(e.sprint.pulse.phase)}else this.phaseLabel.textContent="AMBIENT",this.timeRemaining.textContent="Tap to begin sprint",this.phaseLabel.style.color="var(--gold-dim)";if(i&&e.sprint.active){const l=`${e.sprint.pulse.pulseNumber}-${e.sprint.pulse.phase}`;l!==this.lastPromptPhase&&(this.lastPromptPhase=l,this.showTransitionPrompt(e.sprint.pulse.phase,e.sprint.pulse.pulseNumber))}const I=e.week.planetaryDay,q=e.week.planetaryHour;this.planetaryDay.textContent=`${I.emoji} ${I.planet} Day Â· ${I.energy}`,this.planetaryHour.textContent=`${q.emoji} ${q.energy}`,this.moonPhase.textContent=`${e.moon.symbol} ${e.moon.energy}`,this.quarterInfo.textContent=`Q${e.quarter.quarter} Â· ${e.quarter.energy}`}showTransitionPrompt(e,s){const o={entry:["What is the one thing?","Settle in. Breathe.","Where does your attention want to go?","Arrive fully."],focus:[""],exit:["What emerged?","Breathe. Let it settle.","What wants to be carried forward?","Release. Integrate."]}[e],n=o[Math.min(s-1,o.length-1)];if(!n){this.transitionPrompt.classList.remove("visible");return}this.transitionPrompt.textContent=n,this.transitionPrompt.classList.remove("fading"),this.transitionPrompt.classList.add("visible"),this.promptTimeout&&clearTimeout(this.promptTimeout),this.promptTimeout=window.setTimeout(()=>{this.transitionPrompt.classList.add("fading"),this.transitionPrompt.classList.remove("visible")},15e3)}}function Te(t,e){const s=new Date,i=s.getHours()*60+s.getMinutes(),[o,n]=t.split(":").map(Number),[r,u]=e.split(":").map(Number),c=o*60+n,g=r*60+u;return g>c?i>=c&&i<g:i>=c||i<g}const Ae=[{condition:t=>t.sprint.active&&t.sprint.pulse.phase==="entry"&&t.sprint.pulse.pulseNumber===1,message:"Breathe in. Set your intention.",category:"be"},{condition:t=>t.sprint.active&&t.sprint.pulse.phase==="entry",message:"Breathe. Arrive. Settle into this pulse.",category:"be"},{condition:t=>t.sprint.active&&t.sprint.pulse.phase==="focus"&&t.sprint.pulse.phaseElapsed<2,message:"Focus phase begun. Protect this time.",category:"do"},{condition:t=>t.sprint.active&&t.sprint.pulse.phase==="focus",message:"Deep work. Stay with it.",category:"do"},{condition:t=>t.sprint.active&&t.sprint.pulse.phase==="exit"&&t.sprint.pulse.pulseNumber<4,message:"Capture what emerged. Brief pause, then next pulse.",category:"rest"},{condition:t=>t.sprint.active&&t.sprint.pulse.phase==="exit"&&t.sprint.pulse.pulseNumber===4,message:"96 minutes complete. Walk. Hydrate. Let it integrate.",category:"rest"},{condition:(t,e,s)=>!Te(e,s),message:t=>{const e=t.week.planetaryDay;return`${e.emoji} Rest time Â· ${e.energy} will be here tomorrow`},category:"rest"},{condition:()=>!0,message:t=>{const e=t.week.planetaryDay,s=t.week.planetaryHour;return e.planet===s.planet?`${e.emoji} ${e.planet} day & hour â€” ${e.energy.toLowerCase()} amplified`:`${s.emoji} ${s.energy} flowing through ${e.emoji} ${e.energy}`},category:"be"}];function Pe(t,e="07:00",s="23:00"){for(const i of Ae)if(i.condition(t,e,s))return{message:typeof i.message=="function"?i.message(t):i.message,category:i.category};return{message:"Breathe. You are here.",category:"be"}}const U="equilibrium-state";function Ie(){try{const t=localStorage.getItem(U);if(t){const e=JSON.parse(t);return e.sprintStartTime&&(Date.now()-e.sprintStartTime)/6e4>=96&&(e.sprintStartTime=null),e.preferences.wakeTime||(e.preferences.wakeTime="07:00"),e.preferences.sleepTime||(e.preferences.sleepTime="23:00"),e}}catch(t){console.warn("Failed to load state:",t)}return{preferences:{breathDuration:11,transitionPrompts:!0,showOuterRings:!0,wakeTime:"07:00",sleepTime:"23:00"},sprintStartTime:null,sprintLog:[]}}function d(t){try{localStorage.setItem(U,JSON.stringify(t))}catch(e){console.warn("Failed to save state:",e)}}const a=Ie(),ke=new ve,G=document.getElementById("guidance"),M=document.getElementById("sprint-cta");document.documentElement.style.setProperty("--breath-duration",`${a.preferences.breathDuration}s`);const Le=document.getElementById("settings-toggle"),T=document.getElementById("settings-overlay"),Me=document.getElementById("settings-close"),D=document.getElementById("breath-duration"),Y=document.getElementById("breath-duration-label"),N=document.getElementById("toggle-prompts"),R=document.getElementById("toggle-outer-rings"),C=document.getElementById("wake-time"),O=document.getElementById("sleep-time");D.value=String(a.preferences.breathDuration);Y.textContent=`${a.preferences.breathDuration}s`;N.checked=a.preferences.transitionPrompts;R.checked=a.preferences.showOuterRings;C.value=a.preferences.wakeTime;O.value=a.preferences.sleepTime;Le.addEventListener("click",()=>{T.classList.remove("hidden")});Me.addEventListener("click",()=>{T.classList.add("hidden")});T.addEventListener("click",t=>{t.target===T&&T.classList.add("hidden")});D.addEventListener("input",()=>{const t=parseInt(D.value);a.preferences.breathDuration=t,Y.textContent=`${t}s`,document.documentElement.style.setProperty("--breath-duration",`${t}s`),d(a)});N.addEventListener("change",()=>{a.preferences.transitionPrompts=N.checked,d(a)});R.addEventListener("change",()=>{a.preferences.showOuterRings=R.checked,d(a)});C.addEventListener("change",()=>{a.preferences.wakeTime=C.value,d(a)});O.addEventListener("change",()=>{a.preferences.sleepTime=O.value,d(a)});function De(){a.sprintStartTime||(a.sprintStartTime=Date.now(),d(a))}M.addEventListener("click",t=>{t.stopPropagation(),De()});let m=null;const x=document.getElementById("clock-container");x.addEventListener("pointerdown",t=>{a.sprintStartTime&&t.target.id!=="settings-toggle"&&t.target.id!=="sprint-cta"&&(m=window.setTimeout(()=>{a.sprintLog.push({date:new Date(a.sprintStartTime).toISOString().slice(0,10),sprintNumber:a.sprintLog.filter(e=>e.date===new Date(a.sprintStartTime).toISOString().slice(0,10)).length+1,startTime:new Date(a.sprintStartTime).toISOString(),endTime:new Date().toISOString(),completed:!1}),a.sprintStartTime=null,d(a),m=null},3e3))});x.addEventListener("pointerup",()=>{m&&(clearTimeout(m),m=null)});x.addEventListener("pointerleave",()=>{m&&(clearTimeout(m),m=null)});function V(){const t=Date.now(),e=de(t,a.sprintStartTime,a.preferences.breathDuration);a.sprintStartTime&&!e.sprint.active&&e.sprint.progress>=1&&(a.sprintLog.push({date:new Date(a.sprintStartTime).toISOString().slice(0,10),sprintNumber:a.sprintLog.filter(i=>i.date===new Date(a.sprintStartTime).toISOString().slice(0,10)).length+1,startTime:new Date(a.sprintStartTime).toISOString(),endTime:new Date(t).toISOString(),completed:!0}),a.sprintStartTime=null,d(a)),a.sprintStartTime?M.classList.add("hidden"):M.classList.remove("hidden"),ke.update(e,a.preferences.showOuterRings,a.preferences.transitionPrompts);const s=Pe(e,a.preferences.wakeTime,a.preferences.sleepTime);G.textContent=s.message,G.className=`category-${s.category}`,requestAnimationFrame(V)}requestAnimationFrame(V);
