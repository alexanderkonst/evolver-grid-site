(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const g=[{id:"will",label:"PLANNING",emoji:"ğŸ¯",color:"#e07040",action:"Set intention Â· Define the target"},{id:"emanation",label:"BUILDING",emoji:"ğŸ”¨",color:"#5090c0",action:"Build Â· Create Â· Execute"},{id:"digestion",label:"COMMUNICATING",emoji:"ğŸ“¡",color:"#60a060",action:"Share Â· Polish Â· Ship"},{id:"enrichment",label:"INTEGRATING",emoji:"ğŸŒ€",color:"#a080c0",action:"Integrate Â· Reflect Â· Rest"}];function T(e){const t=Math.min(Math.floor(e*4),3);return g[t]}const f=4,M=16,N=4,w=f+M+N,H=4,P=w*H,Y=[{name:"Sunday",planet:"Sun",symbol:"â˜‰",emoji:"â˜€ï¸",energy:"Illumination & Celebration",intelligence:"Spiritual (SQ)",description:"Vision, purpose, creative self-expression. Celebrate what you've built."},{name:"Monday",planet:"Moon",symbol:"â˜½",emoji:"ğŸŒ™",energy:"Intuition & Emotional Depth",intelligence:"Emotional (EQ)",description:"Reflection, inner sensing, emotional recalibration. Plan from feeling, not force."},{name:"Tuesday",planet:"Mars",symbol:"â™‚",emoji:"ğŸ”¥",energy:"Action & Courage",intelligence:"Kinesthetic (Body)",description:"Decisive action, physical energy, tackling hard things. Move your body."},{name:"Wednesday",planet:"Mercury",symbol:"â˜¿",emoji:"ğŸ—£ï¸",energy:"Clarity & Communication",intelligence:"Verbal-Linguistic",description:"Meetings, writing, learning, networking. Mental agility at peak."},{name:"Thursday",planet:"Jupiter",symbol:"â™ƒ",emoji:"âœ¨",energy:"Expansion & Wisdom",intelligence:"Vision-Logic",description:"Big-picture thinking, teaching, strategic planning. Expand horizons."},{name:"Friday",planet:"Venus",symbol:"â™€",emoji:"ğŸŒ¹",energy:"Beauty & Harmony",intelligence:"Aesthetic & Interpersonal",description:"Creativity, relationships, design, pleasure. Make things beautiful."},{name:"Saturday",planet:"Saturn",symbol:"â™„",emoji:"ğŸª",energy:"Structure & Grounding",intelligence:"Moral & Logical",description:"Discipline, organizing, completing. Review the week, ground the gains."}],U=["Saturn","Jupiter","Mars","Sun","Venus","Mercury","Moon"],V=[3,6,2,5,1,4,0],J={Sun:{emoji:"â˜€ï¸",energy:"Vitality & Purpose"},Moon:{emoji:"ğŸŒ™",energy:"Intuition & Feeling"},Mars:{emoji:"ğŸ”¥",energy:"Drive & Action"},Mercury:{emoji:"ğŸ—£ï¸",energy:"Thought & Communication"},Jupiter:{emoji:"âœ¨",energy:"Expansion & Vision"},Venus:{emoji:"ğŸŒ¹",energy:"Beauty & Connection"},Saturn:{emoji:"ğŸª",energy:"Structure & Discipline"}},$=[{name:"New Moon",symbol:"ğŸŒ‘",start:0,end:1.85,energy:"Set intentions Â· Plant seeds"},{name:"Waxing Crescent",symbol:"ğŸŒ’",start:1.85,end:5.53,energy:"Emerge Â· Take first steps"},{name:"First Quarter",symbol:"ğŸŒ“",start:5.53,end:9.22,energy:"Build Â· Overcome resistance"},{name:"Waxing Gibbous",symbol:"ğŸŒ”",start:9.22,end:12.91,energy:"Refine Â· Trust the process"},{name:"Full Moon",symbol:"ğŸŒ•",start:12.91,end:16.61,energy:"Harvest Â· Celebrate completion"},{name:"Waning Gibbous",symbol:"ğŸŒ–",start:16.61,end:20.3,energy:"Share Â· Teach what you learned"},{name:"Last Quarter",symbol:"ğŸŒ—",start:20.3,end:23.99,energy:"Release Â· Let go of what's done"},{name:"Waning Crescent",symbol:"ğŸŒ˜",start:23.99,end:29.53,energy:"Rest Â· Surrender Â· Renew"}];function q(e){return e===1?g[0]:e===2?g[1]:e===3?g[2]:g[3]}function z(e,t=11){const n=e/1e3%t/t;return{position:n,inhaling:n<.5}}function K(e,t){if(!e)return{elapsed:0,remaining:P,progress:0,pulse:{pulseNumber:1,phase:"entry",phaseElapsed:0,phaseRemaining:f,pulseElapsed:0,pulseProgress:0},active:!1,holonicPhase:g[0]};const s=(t-e)/6e4;if(s>=P)return{elapsed:P,remaining:0,progress:1,pulse:{pulseNumber:4,phase:"exit",phaseElapsed:N,phaseRemaining:0,pulseElapsed:w,pulseProgress:1},active:!1,holonicPhase:g[3]};const o=Math.min(Math.floor(s/w),H-1),i=s-o*w,r=s/P;let c,l,d;return i<f?(c="entry",l=i,d=f-i):i<f+M?(c="focus",l=i-f,d=M-l):(c="exit",l=i-f-M,d=N-l),{elapsed:s,remaining:P-s,progress:r,pulse:{pulseNumber:o+1,phase:c,phaseElapsed:l,phaseRemaining:d,pulseElapsed:i,pulseProgress:i/w},active:!0,holonicPhase:g[o]}}function Q(e){const t=new Date(e),n=t.getHours(),s=t.getMinutes(),o=n*60+s,i=o/1440;let r;n<6?r="dawn":n<12?r="morning":n<18?r="afternoon":r="evening";const c=Math.max(0,o-540),l=Math.floor(c/111)+1;return{hour:n,minute:s,progress:i,quarter:r,sprintSlot:l,holonicPhase:T(i)}}function X(e,t){const s=(V[e]+t)%7,o=U[s],i=J[o];return{planet:o,emoji:i.emoji,energy:i.energy,hourIndex:t}}function Z(e){const t=new Date(e),n=t.getDay(),s=t.getHours(),o=t.getMinutes(),r=((n===0?6:n-1)*1440+s*60+o)/(7*1440);return{dayOfWeek:n,progress:r,planetaryDay:Y[n],planetaryHour:X(n,s),holonicPhase:q(n)}}function ee(e){const t=new Date(e),n=t.getMonth()+1,s=t.getDate(),o=new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),i=(s-1+(t.getHours()*60+t.getMinutes())/1440)/o;return{month:n,day:s,progress:i,holonicPhase:T(i)}}function te(e){const t=new Date(2e3,0,6,18,14).getTime(),n=29.53058770576,i=(e-t)/864e5/n%1*n,r=i/n;let c=$[0];for(const l of $)if(i>=l.start&&i<l.end){c=l;break}return{phase:c.name,symbol:c.symbol,progress:r,day:i,energy:c.energy,holonicPhase:T(r)}}function ne(e,t){const n=new Date(e),s=new Date(n.getFullYear(),0,1).getTime(),o=new Date(n.getFullYear()+1,0,1).getTime(),i=(e-s)/(o-s);let r=i;if(t){const[c,l]=t.split("-").map(Number),d=new Date(n.getFullYear(),c-1,l).getTime();if(e>=d){const p=new Date(n.getFullYear()+1,c-1,l).getTime();r=(e-d)/(p-d)}else{const p=new Date(n.getFullYear()-1,c-1,l).getTime();r=(e-p)/(d-p)}}return{progress:i,holonicPhase:T(i),personalProgress:r,personalHolonicPhase:T(r)}}function ie(e){const t={will:0,emanation:0,digestion:0,enrichment:0},n=[e.day.holonicPhase,e.week.holonicPhase,e.month.holonicPhase,e.moon.holonicPhase,e.year.holonicPhase];e.sprint.active&&n.push(e.sprint.holonicPhase);for(const l of n)t[l.id]++;let s=0,o="will";for(const[l,d]of Object.entries(t))d>s&&(s=d,o=l);const i=g.find(l=>l.id===o),r=Math.round(s/n.length*100),c=r>66?"strong":r>40?"moderate":"mixed";return{dominant:i,coherence:r,coherenceLevel:c,phaseMap:{day:e.day.holonicPhase,week:e.week.holonicPhase,month:e.month.holonicPhase,moon:e.moon.holonicPhase,year:e.year.holonicPhase,sprint:e.sprint.active?e.sprint.holonicPhase:void 0}}}function se(e,t,n=11,s){return{breath:z(e,n),sprint:K(t,e),day:Q(e),week:Z(e),month:ee(e),moon:te(e),year:ne(e,s)}}function re(e){const t=Math.floor(e),n=Math.floor((e-t)*60);return`${t}:${n.toString().padStart(2,"0")}`}const oe=["PLANNING","BUILDING","COMMUNICATING","INTEGRATING"];function ae(e){return oe[Math.min(e-1,3)]||"INCEPTION"}const le="http://www.w3.org/2000/svg",u=200;function E(e,t){const n=document.createElementNS(le,e);for(const[s,o]of Object.entries(t))n.setAttribute(s,o);return n}const ce={will:.4,emanation:.7,digestion:1,enrichment:.55},v=4,de=[{id:"sprint",radius:80,strokeWidth:16,label:"Sprint",color:"#e07040",gap:v},{id:"day",radius:100,strokeWidth:16,label:"Day",color:"#c9a84c",gap:v},{id:"week",radius:120,strokeWidth:14,label:"Week",color:"#4080c0",gap:v},{id:"month",radius:138,strokeWidth:12,label:"Month",color:"#a080c0",gap:v},{id:"year",radius:156,strokeWidth:12,label:"Year",color:"#c06080",gap:v}];class pe{svg;rings;phaseLabel;timeRemaining;transitionPrompt;dayPosition;statusBar;guidanceEl;lastPromptPhase="";promptTimeout=null;constructor(){this.svg=document.getElementById("rings"),this.phaseLabel=document.getElementById("phase-label"),this.timeRemaining=document.getElementById("time-remaining"),this.transitionPrompt=document.getElementById("transition-prompt"),this.dayPosition=document.getElementById("day-position"),this.statusBar=document.getElementById("status-bar"),this.guidanceEl=document.getElementById("guidance"),this.rings=new Map,this.buildClock()}buildClock(){this.svg.innerHTML="";const t=E("defs",{});t.innerHTML=`
            <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                <feGaussianBlur stdDeviation="3" result="blur"/>
                <feComposite in="SourceGraphic" in2="blur" operator="over"/>
            </filter>
        `,this.svg.appendChild(t);for(const n of de){const s=E("g",{class:`ring-group ring-${n.id}`}),o=2*Math.PI*n.radius,i=E("circle",{cx:String(u),cy:String(u),r:String(n.radius),fill:"none",stroke:"#ffffff","stroke-width":String(n.strokeWidth),"stroke-linecap":"round",opacity:"0.10",transform:`rotate(-90 ${u} ${u})`,class:"ring-track"}),r=E("circle",{cx:String(u),cy:String(u),r:String(n.radius),fill:"none",stroke:"#c9a84c","stroke-width":String(n.strokeWidth),"stroke-dasharray":`0 ${o}`,"stroke-dashoffset":"0","stroke-linecap":"round",transform:`rotate(-90 ${u} ${u})`,class:"ring-fill"}),c=-60*Math.PI/180,l=u+n.radius*Math.sin(c),d=u-n.radius*Math.cos(c),p=E("text",{x:String(l),y:String(d),fill:"#ffffff","font-size":String(Math.max(n.strokeWidth*.55,6)),"font-family":"'DM Sans', sans-serif","font-weight":"500","letter-spacing":"0.08em","text-anchor":"middle","dominant-baseline":"central",opacity:"0.5",class:"ring-label"});p.textContent=n.label.toUpperCase(),s.appendChild(i),s.appendChild(r),s.appendChild(p),this.rings.set(n.id,{group:s,track:i,fill:r,label:p,config:n}),this.svg.appendChild(s)}}update(t,n,s,o=0){const i=ie(t),r=i.dominant.color;document.documentElement.style.setProperty("--harmonic-color",r);const c=i.coherenceLevel==="strong"?1:i.coherenceLevel==="moderate"?.6:.35;document.documentElement.style.setProperty("--harmonic-glow",String(c));const l=t.sprint.active,d=l?.5:1;this.updateRing("sprint",t.sprint.progress,t.sprint.holonicPhase,l),this.updateRing("day",t.day.progress,t.day.holonicPhase,!0,l?d:1),this.updateRing("week",t.week.progress,t.week.holonicPhase,n,l?d:1),this.updateRing("month",t.moon.progress,t.moon.holonicPhase,n,l?d:1),this.updateRing("year",t.year.personalProgress,t.year.personalHolonicPhase,n,l?d:1);const p=this.rings.get("sprint");if(p){const h=l?24:p.config.strokeWidth;p.track.setAttribute("stroke-width",String(h)),p.fill.setAttribute("stroke-width",String(h))}if(l){const h=ae(t.sprint.pulse.pulseNumber);this.phaseLabel.textContent=`${h} Â· ${re(t.sprint.pulse.phaseRemaining)}`,this.timeRemaining.textContent="",this.phaseLabel.style.color="#e07040",this.dayPosition.textContent=`Sprint ${o+1}`,this.dayPosition.style.display="",this.guidanceEl.style.display="none"}else this.phaseLabel.textContent="",this.timeRemaining.textContent="",this.dayPosition.style.display="none",this.guidanceEl.style.display="";if(s&&l){const h=`${t.sprint.pulse.pulseNumber}-${t.sprint.pulse.phase}`;h!==this.lastPromptPhase&&(this.lastPromptPhase=h,this.showTransitionPrompt(t.sprint.pulse.phase,t.sprint.pulse.pulseNumber))}const S=new Date,F=`${String(S.getHours()).padStart(2,"0")}:${String(S.getMinutes()).padStart(2,"0")}`,O=t.week.planetaryDay;this.statusBar.innerHTML=`
            <span class="status-time">${F}</span>
            <span>${O.emoji} ${O.planet} Day</span>
            <span>${t.moon.symbol} ${t.moon.phase}</span>
        `}updateRing(t,n,s,o,i=1){const r=this.rings.get(t);if(!r)return;const c=o?i:0;if(r.group.style.opacity=String(c),r.group.style.transition="opacity 0.8s ease",!o)return;const l=r.config.color,d=ce[s.id]??.7;r.fill.setAttribute("stroke",l),r.fill.style.opacity=String(d),r.fill.style.filter="url(#glow)";const p=2*Math.PI*r.config.radius,S=n*p;r.fill.setAttribute("stroke-dasharray",`${S} ${p-S}`),r.track.setAttribute("stroke",l),r.track.setAttribute("opacity","0.08"),r.label.setAttribute("fill",l),r.label.setAttribute("opacity","0.5")}showTransitionPrompt(t,n){const o={entry:["What is the one thing?","Settle in. Breathe.","Where does your attention want to go?","Arrive fully."],focus:[""],exit:["What emerged?","Breathe. Let it settle.","What wants to be carried forward?","Release. Integrate."]}[t],i=o[Math.min(n-1,o.length-1)];if(!i){this.transitionPrompt.classList.remove("visible");return}this.transitionPrompt.textContent=i,this.transitionPrompt.classList.remove("fading"),this.transitionPrompt.classList.add("visible"),this.promptTimeout&&clearTimeout(this.promptTimeout),this.promptTimeout=window.setTimeout(()=>{this.transitionPrompt.classList.add("fading"),this.transitionPrompt.classList.remove("visible")},15e3)}}function ue(e,t){const n=new Date,s=n.getHours()*60+n.getMinutes(),[o,i]=e.split(":").map(Number),[r,c]=t.split(":").map(Number),l=o*60+i,d=r*60+c;return d>l?s>=l&&s<d:s>=l||s<d}const me=[{condition:e=>e.sprint.active&&e.sprint.pulse.phase==="entry"&&e.sprint.pulse.pulseNumber===1,message:"Breathe in. Set your intention.",category:"be"},{condition:e=>e.sprint.active&&e.sprint.pulse.phase==="entry",message:"Breathe. Arrive. Settle into this pulse.",category:"be"},{condition:e=>e.sprint.active&&e.sprint.pulse.phase==="focus"&&e.sprint.pulse.phaseElapsed<2,message:"Focus phase begun. Protect this time.",category:"do"},{condition:e=>e.sprint.active&&e.sprint.pulse.phase==="focus",message:"Deep work. Stay with it.",category:"do"},{condition:e=>e.sprint.active&&e.sprint.pulse.phase==="exit"&&e.sprint.pulse.pulseNumber<4,message:"Capture what emerged. Brief pause, then next pulse.",category:"rest"},{condition:e=>e.sprint.active&&e.sprint.pulse.phase==="exit"&&e.sprint.pulse.pulseNumber===4,message:"96 minutes complete. Walk. Hydrate. Let it integrate.",category:"rest"},{condition:(e,t,n)=>!ue(t,n),message:()=>"Rest time â€” let today settle",category:"rest"},{condition:()=>!0,message:e=>e.week.planetaryDay.energy,category:"be"}];function ge(e,t="07:00",n="23:00"){for(const s of me)if(s.condition(e,t,n))return{message:typeof s.message=="function"?s.message(e):s.message,category:s.category};return{message:"Breathe. You are here.",category:"be"}}const W="equilibrium-state";function he(){try{const e=localStorage.getItem(W);if(e){const t=JSON.parse(e);return t.sprintStartTime&&(Date.now()-t.sprintStartTime)/6e4>=96&&(t.sprintStartTime=null),t.preferences.wakeTime||(t.preferences.wakeTime="07:00"),t.preferences.sleepTime||(t.preferences.sleepTime="23:00"),t.preferences.birthday===void 0&&(t.preferences.birthday=""),t}}catch(e){console.warn("Failed to load state:",e)}return{preferences:{breathDuration:11,transitionPrompts:!0,showOuterRings:!0,wakeTime:"07:00",sleepTime:"23:00",birthday:""},sprintStartTime:null,sprintLog:[]}}function m(e){try{localStorage.setItem(W,JSON.stringify(e))}catch(t){console.warn("Failed to save state:",t)}}const a=he(),fe=new pe,ye=document.getElementById("guidance"),L=document.getElementById("sprint-cta");document.documentElement.style.setProperty("--breath-duration",`${a.preferences.breathDuration}s`);const _=document.getElementById("birthday-prompt"),be=document.getElementById("birthday-input"),Se=document.getElementById("birthday-confirm");a.preferences.birthday||_.classList.remove("hidden");Se.addEventListener("click",()=>{const e=be.value;e&&(a.preferences.birthday=e,m(a)),_.classList.add("hidden")});const Pe=document.getElementById("settings-toggle"),I=document.getElementById("settings-overlay"),Ee=document.getElementById("settings-close"),C=document.getElementById("breath-duration"),G=document.getElementById("breath-duration-label"),D=document.getElementById("toggle-prompts"),B=document.getElementById("toggle-outer-rings"),R=document.getElementById("wake-time"),x=document.getElementById("sleep-time"),A=document.getElementById("birthday");C.value=String(a.preferences.breathDuration);G.textContent=`${a.preferences.breathDuration}s`;D.checked=a.preferences.transitionPrompts;B.checked=a.preferences.showOuterRings;R.value=a.preferences.wakeTime;x.value=a.preferences.sleepTime;A.value=a.preferences.birthday;Pe.addEventListener("click",()=>{I.classList.remove("hidden")});Ee.addEventListener("click",()=>{I.classList.add("hidden")});I.addEventListener("click",e=>{e.target===I&&I.classList.add("hidden")});C.addEventListener("input",()=>{const e=parseInt(C.value);a.preferences.breathDuration=e,G.textContent=`${e}s`,document.documentElement.style.setProperty("--breath-duration",`${e}s`),m(a)});D.addEventListener("change",()=>{a.preferences.transitionPrompts=D.checked,m(a)});B.addEventListener("change",()=>{a.preferences.showOuterRings=B.checked,m(a)});R.addEventListener("change",()=>{a.preferences.wakeTime=R.value,m(a)});x.addEventListener("change",()=>{a.preferences.sleepTime=x.value,m(a)});A.addEventListener("change",()=>{a.preferences.birthday=A.value,m(a)});L.addEventListener("click",()=>{a.sprintStartTime||(a.sprintStartTime=Date.now(),m(a),L.classList.add("hidden"))});let y=null;const k=document.getElementById("clock-container"),b=document.createElement("div");b.id="hold-feedback";b.textContent="Hold to exit sprint";k.appendChild(b);k.addEventListener("pointerdown",e=>{a.sprintStartTime&&e.target.id!=="settings-toggle"&&(b.classList.add("visible"),y=window.setTimeout(()=>{a.sprintStartTime=null,m(a),L.classList.remove("hidden"),b.classList.remove("visible")},3e3))});k.addEventListener("pointerup",()=>{y&&(clearTimeout(y),y=null),b.classList.remove("visible")});k.addEventListener("pointerleave",()=>{y&&(clearTimeout(y),y=null),b.classList.remove("visible")});function j(){const e=Date.now();let t;if(a.preferences.birthday){const r=a.preferences.birthday.split("-");t=`${r[1]}-${r[2]}`}const n=se(e,a.sprintStartTime,a.preferences.breathDuration,t);a.sprintStartTime&&!n.sprint.active&&(a.sprintLog.push({date:new Date().toISOString().split("T")[0],sprintNumber:a.sprintLog.filter(r=>r.date===new Date().toISOString().split("T")[0]).length+1,startTime:new Date(a.sprintStartTime).toTimeString().slice(0,5),endTime:new Date().toTimeString().slice(0,5),completed:!0}),a.sprintStartTime=null,m(a),L.classList.remove("hidden")),a.sprintStartTime&&L.classList.add("hidden");const s=new Date().toISOString().split("T")[0],o=a.sprintLog.filter(r=>r.date===s).length;fe.update(n,a.preferences.showOuterRings,a.preferences.transitionPrompts,o);const i=ge(n,a.preferences.wakeTime,a.preferences.sleepTime);ye.textContent=i.message,requestAnimationFrame(j)}j();
